<!DOCTYPE html>
<html lang="zh-Hant">
<head>
  <meta charset="UTF-8" />
  <title>啟動 55688 App</title>
  <script>
    function getQueryParam(param) {
      const urlParams = new URLSearchParams(window.location.search);
      return urlParams.get(param);
    }

    function isAndroid() {
      return /Android/i.test(navigator.userAgent);
    }

    function isIOS() {
      return /iPhone|iPad|iPod/i.test(navigator.userAgent);
    }

    function tryLaunchApp() {
      const page = getQueryParam("page") || "home";
      // const androidScheme = `my55688://${page}`;

      const androidScheme = `my55688`;
      const androidPackage = `com.testinginstallreferrer.deeplink.test`;
      const iosUniversalLink = `https://diehrose.github.io/deeplink-redirect/${page}`;
      const androidFallback = `https://play.google.com/store/apps/details?id=${androidPackage}&referrer=utm_content%3D${encodeURIComponent(page)}`;
      const iosFallback = `https://itunes.apple.com/tw/app/%E5%8F%B0%E7%81%A3%E5%A4%A7%E8%BB%8A%E9%9A%8A-55688/id579255069?mt=8`; // 替換為正確的 App Store 連結
      // const referrer = `utm_content%3D${encodeURIComponent(page)}`;
      // var androidIntentUrl = 'intent://' + page + '#Intent;scheme=' + androidScheme + ';package=' + androidPackage + ';S.browser_fallback_url=' + androidFallback + ";S.market_referrer=" + referrer + ';end';
      // var androidIntentUrl = 'intent://' + page + '#Intent;scheme=' + androidScheme + ';action=android.intent.action.VIEW;package=' + androidPackage + ';S.browser_fallback_url=' + androidFallback + ';end';
      var androidIntentUrl = 'market://details?id=' + androidPackage ;

      const now = Date.now();

      if (isAndroid()) {
        window.location.href = androidIntentUrl;
      } else {
        alert("請用手機開啟此頁面");
      }
    }

    // window.onload = tryLaunchApp;
  </script>
</head>
<body>
  <p>正在為您啟動 55688 App...</p>
  <p>請點擊以下按鈕以啟動 App：</p>
    <button onclick="tryLaunchApp()" style="padding: 12px 24px; font-size: 32px;">啟動 App</button>
</body>
</html>